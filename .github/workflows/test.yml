name: ğŸ§ª Test Start/Stop Server

on:
  workflow_dispatch:
    inputs:
      action:
        description: "Chá»n hÃ nh Ä‘á»™ng (start / stop)"
        required: true
        default: "start"
  repository_dispatch:
    types: [Start-Server, Stop-Server]

jobs:
  handle-server:
    runs-on: ubuntu-latest

    steps:
      - name: â¬‡ï¸ Checkout repository
        uses: actions/checkout@v4

      - name: ğŸ§© Kiá»ƒm tra loáº¡i hÃ nh Ä‘á»™ng
        run: |
          echo "ğŸ” Kiá»ƒm tra loáº¡i trigger..."
          if [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
            ACTION="${{ github.event.inputs.action }}"
          else
            ACTION="${{ github.event.action }}"
          fi

          echo "ğŸ§  HÃ nh Ä‘á»™ng Ä‘Æ°á»£c chá»n: $ACTION"

          if [ "$ACTION" = "start" ] || [ "$ACTION" = "Start-Server" ]; then
            echo "ğŸš€ Báº¯t Ä‘áº§u khá»Ÿi Ä‘á»™ng server..."
            sleep 2
            echo "âœ… Server Ä‘Ã£ khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng!"
          elif [ "$ACTION" = "stop" ] || [ "$ACTION" = "Stop-Server" ]; then
            echo "ğŸ›‘ Dá»«ng server..."
            sleep 5
            for i in {5..1}; do
              echo "â³ Server sáº½ dá»«ng trong $i giÃ¢y..."
              sleep 1
            done
            echo "âœ… Server Ä‘Ã£ Ä‘Æ°á»£c dá»«ng thÃ nh cÃ´ng!"
          else
            echo "âš ï¸ KhÃ´ng nháº­n diá»‡n Ä‘Æ°á»£c hÃ nh Ä‘á»™ng!"
            exit 1
          fi
