name: ğŸ›‘ Stop Server Minecraft

on:
  workflow_dispatch:
  repository_dispatch:
    types: [Stop-Server]

jobs:
  stop-server:
    runs-on: ubuntu-latest
    timeout-minutes: 20

    steps:
      - name: â¬‡ï¸ Checkout repository
        uses: actions/checkout@v4

      - name: ğŸ” Stop Minecraft Server via RCON
        run: |
          echo "ğŸ§© Cáº¥p quyá»n thá»±c thi cho mcrcon..."
          chmod +x ./mcrcon

          echo "ğŸ”¹ Gá»­i thÃ´ng bÃ¡o ban Ä‘áº§u..."
          ./mcrcon -H 147.185.221.229 -P 24907 -p 26022009 "say Server will stop in 10 seconds!"

          sleep 5
          echo "â³ Äáº¿m ngÆ°á»£c..."
          for i in {5..1}; do
            ./mcrcon -H 147.185.221.229 -P 24907 -p 26022009 "say Server will stop in $i seconds!"
            sleep 1
          done

          ./mcrcon -H 147.185.221.229 -P 24907 -p 26022009 "say Server is stopping now!"
          echo "ğŸ›‘ Dá»«ng server..."
          ./mcrcon -H 147.185.221.229 -P 24907 -p 26022009 "stop"

          echo "âœ… Server Ä‘Ã£ Ä‘Æ°á»£c dá»«ng thÃ nh cÃ´ng."
